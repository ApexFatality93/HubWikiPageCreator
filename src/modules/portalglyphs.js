const validPortalKeys="0123456789ABCDEF";function addPortalGlyphButtons(t,n){if(!t)return;const e=new Array;for(const t of validPortalKeys){const l=`<button type="button" data-input-bind="${n}" class="button" value="${t}" onclick="glyphOnClick(this)"><span class="glyph icon is-small">${t}</span></button>`;e.push(l)}t.innerHTML=e.join("")}function executeOnInput(t){t?.oninput?.call(t)}function glyphOnClick(t){const n=t?.dataset?.inputBind??null,e=globalElements.input[n]??document.getElementById(n)??t?.closest(".tableHeader")?.previousElementSibling?.querySelector("input");e.value.length<12&&(e.value+=t.value),executeOnInput(e)}function displayGlyphs(){const t=globalElements.input.portalglyphsInput,n=t.value;pageData.portalglyphs=n;const e=t.dataset.destNoauto;wikiCode(n,e),glyphRegion(n),getDestElements("galacticCoords").length&&wikiCode(glyphs2Coords(n),"galacticCoords")}function deleteCharacter(t){const n=t?.dataset?.inputBind??null,e=globalElements.input[n]??document.getElementById(n)??t?.closest(".tableCell")?.nextElementSibling?.querySelector("input")??globalElements.input.portalglyphsInput,l=e?.value?.split("");l.pop();const o=l.join("");e.value=o,executeOnInput(e)}function glyphInputOnChange(t){const n=t?.value?.toUpperCase?.();null!=n&&(t.value=validateGlyphInput(n))}function validateGlyphInput(t){return t.split("").filter((t=>validPortalKeys.includes(t))).join("").substring(0,12)}function validateGlyphs(t,n=pageData.civShort,e=regions){if(12!=t.length)return"";return e[n][t.substring(4)]}function glyphRegion(t){const n=globalElements.input.portalglyphsInput;let e="";12==t?.length&&(e=validateGlyphs(t)),glyphError(e,n),wikiCode(e??"","region")}function glyphError(t,n){errorMessage(n,null==t?'No valid Hub region. See <a href="https://nomanssky.fandom.com/wiki/Galactic_Hub_Regions" target="_blank" rel="noopener noreferrer">Galactic Hub Regions</a> for a list of valid regions.':null)}function glyphs2Coords(t){if(12!=t.length)return"";const n=2049,e=parseInt(t.substring(9,12),16),l=parseInt(t.substring(4,6),16),o=parseInt(t.substring(6,9),16),a=t.substring(1,4);let s=0,i=0,r=0;s=e>=n?e-n:e+2047,r=o>=n?o-n:o+2047,i=l>=129?l-129:l+127;const u=new Array(4);return u[0]=s.toString(16).toUpperCase().padStart(4,"0"),u[1]=i.toString(16).toUpperCase().padStart(4,"0"),u[2]=r.toString(16).toUpperCase().padStart(4,"0"),u[3]=a.padStart(4,"0"),u.join(":")}addPortalGlyphButtons(globalElements.output.portalglyphButtons,"portalglyphsInput");
