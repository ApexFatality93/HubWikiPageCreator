const validPortalKeys="0123456789ABCDEF";function addPortalGlyphButtons(t,n){if(t){var e=new Array;for(const a of validPortalKeys){var l=`<button type="button" data-input-bind="${n}" class="button" value="${a}" onclick="glyphOnClick(this)"><span class="glyph icon is-small">${a}</span></button>`;e.push(l)}t.innerHTML=e.join("")}}function executeOnInput(t){t?.oninput?.call(t)}function glyphOnClick(t){var n=t?.dataset?.inputBind??null,n=globalElements.input[n]??document.getElementById(n)??t?.closest(".tableHeader")?.previousElementSibling?.querySelector("input");n.value.length<12&&(n.value+=t.value),executeOnInput(n)}function displayGlyphs(){var t=globalElements.input.portalglyphsInput,n=t.value,t=(pageData.portalglyphs=n,t.dataset.destNoauto);wikiCode(n,t),glyphRegion(n);try{wikiCode(glyphs2Coords(n),"galacticCoords")}catch(t){}}function deleteCharacter(t){var n=t?.dataset?.inputBind??null,n=globalElements.input[n]??document.getElementById(n)??t?.closest(".tableCell")?.nextElementSibling?.querySelector("input")??globalElements.input.portalglyphsInput,t=n?.value?.split(""),t=(t.pop(),t.join(""));n.value=t,executeOnInput(n)}function glyphInputOnChange(t){var n=t?.value?.toUpperCase?.();null!=n&&(t.value=validateGlyphInput(n))}function validateGlyphInput(t){return t.split("").filter(t=>validPortalKeys.includes(t)).join("").substring(0,12)}function validateGlyphs(t,n=pageData.civShort,e=regions){return 12!=t.length?"":e[n][t.substring(4)]}function glyphRegion(t){var n=globalElements.input.portalglyphsInput;let e="";glyphError(e=12==t?.length?validateGlyphs(t):e,n),wikiCode(e??"","region")}function glyphError(t,n){null==t?errorMessage(n,'No valid Hub region. See <a href="https://nomanssky.fandom.com/wiki/Galactic_Hub_Regions" target="_blank" rel="noopener noreferrer">Galactic Hub Regions</a> for a list of valid regions.'):errorMessage(n)}function glyphs2Coords(t){if(12!=t.length)return"";var n=2049,e=parseInt(t.substring(9,12),16),l=parseInt(t.substring(4,6),16),a=parseInt(t.substring(6,9),16),t=t.substring(1,4);let o=0,r=0,i=0;o=n<=e?e-n:e+2047,i=n<=a?a-n:a+2047,r=129<=l?l-129:l+127;e=new Array(4);return e[0]=o.toString(16).toUpperCase().padStart(4,"0"),e[1]=r.toString(16).toUpperCase().padStart(4,"0"),e[2]=i.toString(16).toUpperCase().padStart(4,"0"),e[3]=t.padStart(4,"0"),e.join(":")}addPortalGlyphButtons(globalElements.output.portalglyphButtons,"portalglyphsInput");