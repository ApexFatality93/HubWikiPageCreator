function reset(){const e=document.querySelectorAll(".table .data input, .table .data textarea"),t=document.querySelectorAll(".table .data select"),n=document.getElementsByTagName("output");for(const t of e)switch(t.type){case"checkbox":t.checked=!1;break;case"radio":const e=document.querySelectorAll('input[type="radio"]:not([checked])'),n=document.querySelectorAll('input[type="radio"][checked]');for(const t of e)t.checked=!1;for(const e of n)e.checked=!0;break;default:t.value=""}for(const e of t)e.value=e.options?.[0]?.value;for(const e of n)e.innerText="";"function"==typeof resetGallery&&resetGallery();for(const e in pageData)delete pageData[e];const o=document.querySelectorAll(".error");for(const e of o)errorMessage(e.previousElementSibling);for(const e in links)delete links[e];"function"==typeof resetExternal&&resetExternal(),readDefaultValues(),showAll()}function copyCode(e,t){e.style.pointerEvents="none";const{innerText:n,dataset:{link:o}}=e;dataIntegrityObj.text=JSON.stringify(pageData),dataIntegrityObj.copy=o;const a=checkDataIntegrity(e);if(a)return e.classList.remove("is-primary"),e.classList.add("is-danger"),e.innerText=a,void setTimeout((()=>{e.classList.remove("is-danger"),e.classList.add("is-primary"),e.innerText=n,e.style.pointerEvents=""}),1500);const r=globalElements?.output?.[t]?.innerText?.replaceAll("\n\n\n","\n\n")??t;navigator.clipboard.writeText(r),dataIntegrityObj.copy=o,e.innerText="Copied!",setTimeout((()=>{e.innerText=n,e.style.pointerEvents=""}),1500)}function downloadFile(e){const t=globalElements.output.fullArticle.innerText.replaceAll("\n\n\n","\n\n"),n=pageData.name,o=e;o.href="data:text/plain,"+encodeURIComponent(t),o.download=n+".txt"}function createPage(e,t=pageData.name){e.style.pointerEvents="none";assignLink(e,wikiLink+"Special:EditPage/"+t)}function assignLink(e,t){const n=checkDataIntegrity(e),o=new RegExp(`[${["#","<",">","[","]","{","|","}"].join("")}]`,"g");if(n){const t=e.innerText;e.removeAttribute("href"),e.className="button is-danger",e.innerText=n,setTimeout((()=>{e.className="button is-outlined is-primary",e.innerText=t,e.style.pointerEvents=""}),1500)}else e.href=t.replace(o," "),e.target="_blank",e.rel="noopener noreferrer",e.style.pointerEvents=""}function toggleRedirect(){if("function"!=typeof redirectPage)return;const e=document.getElementById("reset"),t=["copyRedirect","createRedirect"],n=document.createElement("p");if(n.id="redirectNote",n.classList.add("has-text-centered"),n.innerText="Please create a redirect for your page!",!redirectPage())return t.forEach((()=>{const n=e.previousElementSibling;t.includes(n.id)&&n.remove()})),void document.getElementById(n.id)?.remove();const o=document.createElement("button");o.innerText="Copy Redirect Code",o.type="button",assignFunction(o,"copyCode(this, `#REDIRECT [[${pageData.name}]]`)","onclick");const a=document.createElement("a");a.rel="noopener noreferrer",a.target="_blank",a.innerText="Create Redirect",assignFunction(a,"createPage(this, redirectPage())","onclick");const r=new Array,i=[o,a];for(let e=0;e<i.length;e++){const n=i[e],o=t[e];if(document.getElementById(o))return;n.classList.add("button","is-outlined","is-primary"),n.id=o,n.dataset.link="redirect",r.push(n.outerHTML)}e.insertAdjacentHTML("beforebegin",r.join("")),e.parentElement.insertAdjacentElement("beforebegin",n)}(()=>{globalElements.output.actions.innerHTML='\n\t<button class="button is-outlined is-primary" id="copy" type="button" data-link="page" onclick="copyCode(this, \'fullArticle\')">Copy Wikicode</button>\n\t<a class="button is-outlined is-primary" id="download" onclick="downloadFile(this)">Download File</a>\n\t<a class="button is-outlined is-primary" href="https://nomanssky.fandom.com/wiki/Special:Upload" id="uploadLink" rel="noopener noreferrer" target="_blank">Upload Pictures</a>\n\t<a class="button is-outlined is-primary" id="create" data-link="page" onclick="createPage(this)">Create Page</a>\n\t<button class="button is-warning" id="reset" type="reset" onclick="reset()">Reset Inputs</button>',globalElements.output.actions.insertAdjacentHTML("beforebegin",'<p class="has-text-centered">You must copy the code first, then paste it into the wiki page.<br>Also don\'t forget to upload any images you have put here.</p>');const e=window.location;if(!["127.0.0.1","localhost"].includes(e.hostname)&&"file:"!=e.protocol)return void addStaticPageData("debug",!1);globalElements.output.actions.insertAdjacentHTML("beforeend",'<label style="display:flex; gap: .3rem"><input class="checkbox" type="checkbox" id="skipCheck">Enable debug (no checks, no popups)</label><button style="margin: 0 1rem" class="button is-danger is-small" id="clearCache" onclick="localStorage.clear()">Clear Localstorage</button>');const t=document.getElementById("skipCheck");t.onchange=e=>{const t=e.target.checked;pageData.debug=t,uploadShown=t,galleryUploadShown=t,document.documentElement.dataset.debug=t,enableTextMarking()};if(!new URLSearchParams(e.search).has("debug"))return;t.checked=!0;const n=new Event("change",{bubbles:!0,cancelable:!0});t.dispatchEvent(n)})();
